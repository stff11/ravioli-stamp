<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
      <!-- Standard favicon -->
  <link rel="icon" href="favicon.ico" type="image/x-icon">

  <!-- PNG favicons (for newer browsers and better resolution) -->
  <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">

  <!-- Apple Touch Icon (iOS) -->
  <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">

  <!-- Manifest (optional, for PWA support) -->
  <link rel="manifest" href="site.webmanifest">

  <!-- Open Graph (Facebook, LinkedIn) -->
  <meta property="og:url" content="https://ravioli-stamp.vercel.app/">
  <meta property="og:type" content="website">
  <meta property="og:title" content="Custom Ravioli Stamps">
  <meta property="og:description" content="Buy now Personalised Ravioli Stamps">
  <meta property="og:image" content="https://ravioli-stamp.vercel.app/images/stamp.jpeg">
  <meta property="og:image:secure_url" content="https://ravioli-stamp.vercel.app/images/stamp.jpeg">
  <meta property="og:image:type" content="image/jpeg">
  <meta property="og:image:width" content="380">
  <meta property="og:image:height" content="200">
    <title>Redirecting...</title>
    <script>
(function () {
  const existingLang = document.cookie.match(/(?:^|;\s*)langPref=(\w+)/)?.[1];
  const currentPath = window.location.pathname;

  if (!existingLang && (currentPath === '/' || currentPath.endsWith('/index.html'))) {
    fetch('https://ipapi.co/json/')
      .then(res => res.json())
      .then(data => {
        const country = data.country;
        let lang = 'en';
        if (country === 'IT') lang = 'it';
        else if (country === 'PL') lang = 'pl';

        // Set persistent language and location cookies
        document.cookie = `langPref=${lang}; path=/; max-age=31536000`;
        document.cookie = `location=${country}; path=/; max-age=31536000`;
        if (!currentPath.includes(`/${lang}/`)) {
          window.location.href = `/${lang}/index.html`;
        }
      })
      .catch(() => {
        window.location.href = '/en/index.html';
      });
  } else if (existingLang && !currentPath.includes(`/${existingLang}/`)) {
    window.location.href = `/${existingLang}/index.html`;
  }
})();
</script>
  </head>
  <body>
    <p>If you're not redirected automatically, <a href="/en/index.html">click here</a>.</p>
    <script>
      // Attach click event listeners to all language switcher links
      document.addEventListener("DOMContentLoaded", function () {
        document.querySelectorAll(".language-switcher a").forEach(link => {
          link.addEventListener("click", function (e) {
            const lang = link.getAttribute("href").split("/")[1]; // get 'en', 'it', or 'pl'
            document.cookie = `langPref=${lang}; path=/; max-age=31536000`;
          });
        });
      });
    </script>
  </body>
</html>